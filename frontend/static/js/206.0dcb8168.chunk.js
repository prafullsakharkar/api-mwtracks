"use strict";(self.webpackChunkmwtracks=self.webpackChunkmwtracks||[]).push([[206],{39300:function(t,e,n){n.d(e,{IY:function(){return v},Ls:function(){return x},Nq:function(){return f},Rf:function(){return p},YN:function(){return w},bz:function(){return Z},cn:function(){return l},lP:function(){return g},oY:function(){return d},tI:function(){return k}});var r,a=n(4942),s=n(74165),u=n(15861),o=n(80827),i=n(56573),c="/api/v1/account/users/",p=(0,o.hg)("userApp/users/getUsers",function(){var t=(0,u.Z)((0,s.Z)().mark((function t(e,n){var r,a,u;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.getState,r=null===e||void 0===e?void 0:e.id,a=null===e||void 0===e?void 0:e.entity,u="group"===a&&r?"/api/v1/user/group/"+r+"/users/":"project"===a&&r?"/api/v1/entity/project/"+r+"/users/":c,null===e||void 0===e||delete e.id,null===e||void 0===e||delete e.entity,t.next=8,i.Z.get(u,{params:e}).then((function(t){return t.data})).catch((function(t){console.error(t)}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),l=(0,o.hg)("userApp/users/addUser",function(){var t=(0,u.Z)((0,s.Z)().mark((function t(e,n){var r,a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dispatch,n.getState,delete e.avatar,console.log(e),t.next=5,i.Z.post(c,e);case 5:return r=t.sent,t.next=8,r.data;case 8:return a=t.sent,t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),f=(0,o.hg)("userApp/users/updateUser",function(){var t=(0,u.Z)((0,s.Z)().mark((function t(e,n){var r,a,u;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dispatch,n.getState,r=e.id,delete e.id,t.next=5,i.Z.patch(c+r+"/",e);case 5:return a=t.sent,t.next=8,a.data;case 8:return u=t.sent,t.abrupt("return",u);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),d=(0,o.hg)("userApp/users/addUserToProject",function(){var t=(0,u.Z)((0,s.Z)().mark((function t(e,n){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.dispatch,n.getState,e.projects.forEach((function(t,n){i.Z.post("/api/v1/entity/project/"+t+"/add_users/",e.users).data}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),v=(0,o.hg)("userApp/users/removeUserFromProjects",function(){var t=(0,u.Z)((0,s.Z)().mark((function t(e,n){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.dispatch,n.getState,e.projects.forEach((function(t,n){i.Z.post("/api/v1/entity/project/"+t+"/remove_users/",e.users).data}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),k=(0,o.hg)("userApp/users/addUserToGroups",function(){var t=(0,u.Z)((0,s.Z)().mark((function t(e,n){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.dispatch,n.getState,e.users.forEach((function(t,n){i.Z.post(c+t+"/add_groups/",e.groups).data}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),g=(0,o.hg)("userApp/users/removeUserFromGroups",function(){var t=(0,u.Z)((0,s.Z)().mark((function t(e,n){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.dispatch,n.getState,e.users.forEach((function(t,n){i.Z.post(c+t+"/remove_groups/",e.groups).data}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),h=(0,o.hg)("userApp/users/removeUser",function(){var t=(0,u.Z)((0,s.Z)().mark((function t(e,n){var r,a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dispatch,n.getState,t.next=3,i.Z.delete(c+e+"/");case 3:return r=t.sent,t.next=6,r.data;case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),Z=(0,o.hg)("userApp/users/removeUsers",function(){var t=(0,u.Z)((0,s.Z)().mark((function t(e,n){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.dispatch,n.getState,e.forEach((function(t,e){r(f({id:t,is_active:!1}))}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),y=(0,o.HF)({}),m=y.getSelectors((function(t){return t.userApp.users})),w=m.selectAll,x=m.selectById,A=(0,o.oM)({name:"userApp/users",initialState:y.getInitialState({totalCount:0,isLoading:!0}),extraReducers:(r={},(0,a.Z)(r,h.fulfilled,y.removeOne),(0,a.Z)(r,f.fulfilled,y.upsertOne),(0,a.Z)(r,l.fulfilled,y.addOne),(0,a.Z)(r,p.pending,(function(t,e){t.isLoading=!0})),(0,a.Z)(r,p.fulfilled,(function(t,e){var n=e.payload;y.setAll(t,(null===n||void 0===n?void 0:n.results)||n),t.totalCount=(null===n||void 0===n?void 0:n.count)||n.length,t.isLoading=!1})),r)});e.ZP=A.reducer},16787:function(t,e,n){n.d(e,{Ak:function(){return v},BJ:function(){return j},E6:function(){return L},Ge:function(){return h},Q$:function(){return x},Sv:function(){return Z},Uq:function(){return b},V3:function(){return F},W:function(){return M},X5:function(){return g},_N:function(){return D},_X:function(){return k},ic:function(){return N},pi:function(){return E},rW:function(){return I},sN:function(){return O},sv:function(){return _},vf:function(){return P}});var r,a=n(4942),s=n(93433),u=n(74165),o=n(1413),i=n(15861),c=n(80827),p=n(56573),l=n(32600),f=(n(76419),n(18390)),d="/api/v1/entity/tasks/",v=(0,c.hg)("taskApp/task/getTasks",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(e,n){var r,a,s,i;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.getState,r=null===e||void 0===e?void 0:e.uid,a=null===e||void 0===e?void 0:e.entity,s=a&&r?"/api/v1/entity/"+a+"s/"+r+"/tasks/":d,null===(i=(0,o.Z)({},e))||void 0===i||delete i.uid,null===i||void 0===i||delete i.entity,t.next=9,p.Z.get(s,{params:i}).then((function(t){return t.data})).catch((function(t){console.error(t)}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),k=(0,c.hg)("taskApp/task/getTask",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(e,n){var r,a,s;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dispatch,n.getState,r=e.uid,t.next=4,p.Z.get(d+r+"/");case 4:return a=t.sent,t.next=7,a.data;case 7:return s=t.sent,t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),g=(0,c.hg)("taskApp/tasks/getTaskUser",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(e,n){var r,a;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dispatch,n.getState,t.next=3,p.Z.get("/api/v1/entity/tasks/"+e+"/user_tasks/");case 3:return r=t.sent,t.next=6,r.data;case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),h=(0,c.hg)("taskApp/tasks/getAssignTasks",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(e,n){var r,a;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dispatch,n.getState,t.next=3,p.Z.get(d,{params:{steps:e+""}});case 3:return r=t.sent,t.next=6,r.data;case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),Z=(0,c.hg)("taskApp/task/addTasks",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(e,n){var r,a;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.dispatch,n.getState,a=[],Array.isArray(e)?e.map((function(t){var e;(null===t||void 0===t||null===(e=t.task_users)||void 0===e?void 0:e.length)>0&&(a=[].concat((0,s.Z)(a),(0,s.Z)(t.task_users)))})):a=(null===e||void 0===e?void 0:e.task_users)&&[].concat((0,s.Z)(a),(0,s.Z)(e.task_users)),t.next=5,p.Z.post(d,e).then((function(t){return a.length>0&&r(y(a)),t.data})).catch((function(t){return console.info(t.response),[]}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),y=(0,c.hg)("taskApp/task/addUserTasks",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(e,n){var r,a;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dispatch,n.getState,t.next=3,p.Z.post("/api/v1/entity/usertasks/",e);case 3:return r=t.sent,t.next=6,r.data;case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),m=(0,c.hg)("taskApp/task/updateTask",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(e,n){var r,a;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dispatch,n.getState,t.next=3,p.Z.post("/api/v1/entity/projects/"+project+"/user_task_bulk_update/",e);case 3:return r=t.sent,t.next=6,r.data;case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),w=(0,c.hg)("taskApp/tasks/updateTaskUser",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(e,n){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dispatch,n.getState,t.next=3,p.Z.delete("/api/v1/entity/usertasks/"+e+"/").then((function(){return e}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),x=(0,c.hg)("taskApp/task/updateMultipleTasks",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(e,n){var r,a,o,i,c,l,f,v,k;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.multipleTaskList,a=e.project,o=n.dispatch,n.getState,i=[],c=[],Array.isArray(r)?r.map((function(t){var e,n;(null===t||void 0===t||null===(e=t.task_users)||void 0===e?void 0:e.length)>0&&(i=[].concat((0,s.Z)(i),(0,s.Z)(t.task_users))),(null===t||void 0===t||null===(n=t.remove_users)||void 0===n?void 0:n.length)>0&&(c=[].concat((0,s.Z)(c),(0,s.Z)(t.remove_users)))})):(i=(null===r||void 0===r?void 0:r.task_users)&&[].concat((0,s.Z)(i),(0,s.Z)(r.task_users))||[],c=(null===r||void 0===r?void 0:r.remove_users)&&[].concat((0,s.Z)(c),(0,s.Z)(r.remove_users))||[]),(l=i.length>0&&i.filter((function(t){return!t.id}))).length>0&&o(y(l)),(f=i.length>0&&i.filter((function(t){return t.id}))).length>0&&o(m(f)),c.length>0&&c.map((function(t){return o(w(t))})),v=null,!Array.isArray(r)){t.next=17;break}return t.next=14,p.Z.post("/api/v1/entity/projects/"+a+"/task_bulk_update/",r);case 14:v=t.sent,t.next=20;break;case 17:return t.next=19,p.Z.patch(d+r.id+"/",r);case 19:v=t.sent;case 20:return t.next=22,v.data;case 22:return k=t.sent,t.abrupt("return",k);case 24:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),A=(0,c.hg)("taskApp/task/removeTask",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(e,n){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dispatch,n.getState,t.next=3,p.Z.delete(d+e+"/").then((function(t){return console.info(t),e})).catch((function(t){console.error(t)}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),D=(0,c.hg)("taskApp/task/removeTasks",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(e,n){var r;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.dispatch,n.getState,(0,l._1)({title:"Confirm to delete tasks !!!",message:"Are you sure, you want to remove selected tasks ?",buttons:[{label:"Yes",onClick:function(){e.map((function(t){r(A(t))})),r((0,f.PV)({message:"Tasks has been removed successfully !"}))}},{label:"No",onClick:function(){return console.log("No action to remove tasks")}}]}),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),T=(0,c.HF)({selectId:function(t){return t.uid}}),S=T.getSelectors((function(t){return t.taskApp?t.taskApp.tasks:t.overviewApp.tasks})),b=S.selectAll,_=(S.selectEntities,S.selectById),C=(0,c.oM)({name:"taskApp/tasks",initialState:T.getInitialState({totalCount:0,isLoading:!0,taskDialog:{type:"new",props:{open:!1},data:null}}),reducers:{openNewTaskDialog:function(t,e){t.taskDialog={type:"new",props:{open:!0},data:null}},closeNewTaskDialog:function(t,e){t.taskDialog={type:"new",props:{open:!1},data:null}},openEditTaskDialog:function(t,e){t.taskDialog={type:"edit",props:{open:!0},data:e.payload}},closeEditTaskDialog:function(t,e){t.taskDialog={type:"edit",props:{open:!1},data:null}},openMultipleTaskDialog:function(t,e){t.taskDialog={type:"multiple",props:{open:!0},data:e.payload}},closeMultipleTaskDialog:function(t,e){t.taskDialog={type:"multiple",props:{open:!1},data:null}},openCsvCreateDialog:function(t,e){t.taskDialog={type:"csvCreate",props:{open:!0},data:e.payload}},closeCsvCreateDialog:function(t,e){t.taskDialog={type:"csvCreate",props:{open:!1},data:null}},openCsvUpdateDialog:function(t,e){t.taskDialog={type:"csvUpdate",props:{open:!0},data:e.payload}},closeCsvUpdateDialog:function(t,e){t.taskDialog={type:"csvUpdate",props:{open:!1},data:null}}},extraReducers:(r={},(0,a.Z)(r,A.fulfilled,(function(t,e){T.removeOne(t,e.payload)})),(0,a.Z)(r,Z.fulfilled,(function(t,e){e.payload.length>0?T.upsertMany(t,e.payload):T.upsertOne(t,e.payload)})),(0,a.Z)(r,k.fulfilled,(function(t,e){T.upsertOne(t,e.payload)})),(0,a.Z)(r,v.pending,(function(t,e){t.isLoading=!0})),(0,a.Z)(r,v.fulfilled,(function(t,e){var n=e.payload;T.setAll(t,(null===n||void 0===n?void 0:n.results)||n),t.totalCount=(null===n||void 0===n?void 0:n.count)||n.length,t.isLoading=!1})),(0,a.Z)(r,g.fulfilled,(function(t,e){t.userTasks=e.payload})),(0,a.Z)(r,h.fulfilled,(function(t,e){var n=e.payload;T.setAll(t,n||[])})),(0,a.Z)(r,x.fulfilled,(function(t,e){Array.isArray(e.payload)?T.upsertMany(t,e.payload):T.upsertOne(t,e.payload)})),r)}),U=C.actions,j=U.openNewTaskDialog,E=U.closeNewTaskDialog,N=U.openEditTaskDialog,M=U.closeEditTaskDialog,L=U.openMultipleTaskDialog,I=(U.closeMultipleTaskDialog,U.openCsvCreateDialog),O=U.closeCsvCreateDialog,P=U.openCsvUpdateDialog,F=U.closeCsvUpdateDialog;e.ZP=C.reducer}}]);