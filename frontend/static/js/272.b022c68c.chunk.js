"use strict";(self.webpackChunkmwtracks=self.webpackChunkmwtracks||[]).push([[272],{44272:function(e,r,n){n.r(r);var t=n(74165),l=n(15861),a=n(1413),i=n(61113),s=n(70024),o=n(31095),u=n(3394),d=n(22408),c=n(58467),m=n(47313),f=n(33776),v=n(49614),x=n(21933),p=n(75627),h=n(62563),j=n(15743),Z=n(64013),b=n(63585),g=n(30467),N=n(32729),_=n(96981),w=n(10546),y=n.n(w),k=n(46417),C=x.Ry().shape({code:x.Z_().required("You must enter a project code"),name:x.Z_().required("You must enter a project name"),resolution:x.Z_().required("You must enter a project name"),start_frame:x.Z_().required("You must enter a project name"),fps:x.Z_().required("You must enter a fps")}),q={name:"",code:"",cg_supervisor:"",duration:1,is_episodic:!0,resolution:"",is_active:!0,start_frame:101,fps:24,thumbnail:null};r.default=function(e){var r=(0,c.UO)(),n=(0,d.I0)(),x=(0,c.s0)(),w=(0,d.v9)((function(e){return(0,_.lT)(e,r.uid)}))||null,Q=(0,d.v9)((function(e){return e.projectApp.users.entities})),P=(0,p.cI)({mode:"onChange",resolver:(0,h.X)(C)}),S=P.control,W=P.watch,F=P.reset,T=P.handleSubmit,A=P.formState,I=(P.getValues,P.setValue,A.isValid),Y=A.dirtyFields,E=A.errors,O=W();function R(e){return new Promise((function(r,t){var l=e.target.files[0];if(l){var a=new FormData;a.append("thumbnail",l),a.id=O.uid,n((0,_.ty)(a));var i=new FileReader;i.onload=function(){r("data:".concat(l.type,";base64,").concat(btoa(i.result)))},i.onerror=t,i.readAsBinaryString(l)}}))}return(0,m.useEffect)((function(){F("new"==r.uid?q:(0,a.Z)({},w))}),[w,F]),v.Z.isEmpty(O)?(0,k.jsx)(f.Z,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(j.Z,{className:"relative w-full h-88 px-32 sm:px-48",sx:{backgroundColor:"background.default"},children:!O.thumbnail&&(0,k.jsx)(i.Z,{className:"flex justify-center mt-24 text-3xl font-bold truncate",children:"Create New Project"})}),(0,k.jsxs)("div",{className:"relative flex flex-col flex-auto items-center px-24 sm:px-48",children:[(null===O||void 0===O?void 0:O.thumbnail)&&(0,k.jsx)("div",{className:"w-full",children:(0,k.jsx)("div",{className:"flex flex-auto items-end -mt-64",children:(0,k.jsx)(p.Qr,{control:S,name:"thumbnail",render:function(e){var r=e.field,n=r.onChange,a=r.value;return(0,k.jsxs)(j.Z,{sx:{borderWidth:4,borderStyle:"solid",borderColor:"background.paper"},className:"relative flex items-center justify-center w-128 h-128 rounded-full overflow-hidden",children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 z-10"}),(0,k.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:(0,k.jsx)("div",{children:(0,k.jsxs)("label",{htmlFor:"button-thumbnail",className:"flex p-8 cursor-pointer",children:[(0,k.jsx)("input",{accept:"image/*",className:"hidden",id:"button-thumbnail",type:"file",onChange:function(){var e=(0,l.Z)((0,t.Z)().mark((function e(r){var l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(r);case 2:l=e.sent,n(l);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}),(0,k.jsx)(Z.Z,{className:"text-white",children:"heroicons-outline:camera"})]})})}),(0,k.jsx)(b.Z,{sx:{backgroundColor:"background.default",color:"secondary"},className:"object-cover w-full h-full text-64 font-bold",src:a,alt:null===w||void 0===w?void 0:w.code,children:null===w||void 0===w?void 0:w.code.charAt(0)})]})}})})}),(0,k.jsx)(p.Qr,{control:S,name:"name",render:function(e){var r,n=e.field;return(0,k.jsx)(g.Z,(0,a.Z)((0,a.Z)({className:"mt-24"},n),{},{label:"Project Name",id:"name",error:!!E.name,helperText:null===E||void 0===E||null===(r=E.name)||void 0===r?void 0:r.message,variant:"outlined",required:!0,fullWidth:!0}))}}),(0,k.jsx)(p.Qr,{control:S,name:"code",render:function(e){var r,n=e.field;return(0,k.jsx)(g.Z,(0,a.Z)((0,a.Z)({className:"mt-24"},n),{},{label:"Project Code",id:"code",error:!!E.code,helperText:null===E||void 0===E||null===(r=E.code)||void 0===r?void 0:r.message,variant:"outlined",fullWidth:!0,required:!0}))}}),(0,k.jsx)(p.Qr,{control:S,name:"cg_supervisor",render:function(e){var r=e.field,n=r.onChange;r.value;return(0,k.jsx)(N.Z,{className:"mt-24",id:"cg_supervisor",options:Object.values(Q),value:(null===O||void 0===O?void 0:O.cg_supervisor)&&Q[O.cg_supervisor]||null,disableClearable:!0,getOptionLabel:function(e){return e.email},fullWidth:!0,onChange:function(e,r){n(r.id)},renderInput:function(e){return(0,k.jsx)(g.Z,(0,a.Z)((0,a.Z)({},e),{},{label:"CG Supervisor"}))}})}}),(0,k.jsx)(p.Qr,{control:S,name:"start_frame",render:function(e){var r,n=e.field;return(0,k.jsx)(g.Z,(0,a.Z)((0,a.Z)({className:"mt-24"},n),{},{label:"Start Frame",id:"start_frame",error:!!E.start_frame,helperText:null===E||void 0===E||null===(r=E.start_frame)||void 0===r?void 0:r.message,variant:"outlined",required:!0,fullWidth:!0}))}}),(0,k.jsx)(p.Qr,{control:S,name:"duration",render:function(e){var r,n=e.field;return(0,k.jsx)(g.Z,(0,a.Z)((0,a.Z)({className:"mt-24"},n),{},{label:"Duration (in days)",id:"duration",error:!!E.duration,helperText:null===E||void 0===E||null===(r=E.duration)||void 0===r?void 0:r.message,variant:"outlined",required:!0,fullWidth:!0}))}}),(0,k.jsx)(p.Qr,{control:S,name:"fps",render:function(e){var r,n=e.field;return(0,k.jsx)(g.Z,(0,a.Z)((0,a.Z)({className:"mt-24"},n),{},{label:"FPS",id:"fps",error:!!E.fps,helperText:null===E||void 0===E||null===(r=E.fps)||void 0===r?void 0:r.message,variant:"outlined",required:!0,fullWidth:!0}))}}),(0,k.jsx)(p.Qr,{control:S,name:"resolution",render:function(e){var r,n=e.field;return(0,k.jsx)(g.Z,(0,a.Z)((0,a.Z)({className:"mt-24"},n),{},{label:"Resolution",placeholder:"(e.g 1920X1020)",id:"resolution",error:!!E.resolution,helperText:null===E||void 0===E||null===(r=E.resolution)||void 0===r?void 0:r.message,variant:"outlined",required:!0,fullWidth:!0}))}}),(0,k.jsxs)("div",{className:"mt-24",children:[(0,k.jsxs)(i.Z,{children:["Is Active",(0,k.jsx)(p.Qr,{control:S,name:"is_active",label:"Project Active",labelPlacement:"start",render:function(e){var r=e.field;return(0,k.jsx)(s.Z,(0,a.Z)((0,a.Z)({checked:O.is_active},r),{},{name:"is_active"}))}})]}),(0,k.jsxs)(i.Z,{children:["Is Episodic",(0,k.jsx)(p.Qr,{control:S,name:"is_episodic",label:"Project Active",labelPlacement:"start",render:function(e){var r=e.field;return(0,k.jsx)(s.Z,(0,a.Z)((0,a.Z)({checked:O.is_episodic},r),{},{name:"is_episodic"}))}})]})]})]}),(0,k.jsxs)(j.Z,{className:"flex items-center mt-40 py-14 pr-16 pl-4 sm:pr-48 sm:pl-36 border-t",sx:{backgroundColor:"background.default"},children:[(0,k.jsx)(o.Z,{className:"ml-auto",component:u.Z,to:-1,children:"Cancel"}),(0,k.jsx)(o.Z,{className:"ml-8",variant:"contained",color:"secondary",disabled:v.Z.isEmpty(Y)||!I,onClick:T((function(e){if("new"===r.uid)n((0,_.B)(e)).then((function(){return x("/projects")}));else{var t=y()(w,e);t.id=w.uid,n((0,_.ty)(t)).then((function(){return x("/projects")}))}})),children:"Save"})]})]})}}}]);