"use strict";(self.webpackChunkmwtracks=self.webpackChunkmwtracks||[]).push([[237],{19237:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(94560),r=n(5531),i=n(47313),o=n(22408),l=n(58467),s=n(83508),c=n(17592),d=n(30242),p=n(89600),u=n(94058),h=n(68941),f=n(61113),m=n(64013),g=n(9506),x=n(47131),S=n(46417);var b=function(e){var t=(0,o.I0)(),n=(0,o.v9)(u.Zo),a=(0,o.v9)((function(e){return e.utilStepApp.utilSteps.isLoading})),r=i.useMemo((function(){return[{header:"Id",accessorKey:"id",size:60},{header:"Name",accessorKey:"name",size:120},{header:"Entity",accessorKey:"entity",size:120},{header:"Created At",accessorKey:"created_at",sortable:!0,Cell:function(e){var t=e.cell;return(0,S.jsx)("span",{children:t.getValue()&&(0,p.Z)(new Date(t.getValue()),"dd-MM-y hh:mm:ss")})}}]}),[]);return 0==n.length?(0,S.jsx)("div",{className:"flex flex-1 items-center justify-center h-full",children:(0,S.jsx)(f.Z,{color:"text.secondary",variant:"h5",children:"There are no utilSteps!"})}):(0,S.jsx)(h.Z,{isLoading:a,data:n,columns:r,renderRowActions:function(e){var n=e.row;e.table;return(0,S.jsxs)(g.Z,{sx:{display:"flex",flexWrap:"nowrap",gap:"8px"},children:[(0,S.jsx)(x.Z,{color:"secondary",onClick:function(e){e.stopPropagation(),t((0,u.Ro)(n.original))},children:(0,S.jsx)(m.Z,{size:20,children:"heroicons-outline:pencil-alt"})}),(0,S.jsx)(x.Z,{color:"error",onClick:function(e){e.stopPropagation(),t((0,u.mz)(n.original.id))},children:(0,S.jsx)(m.Z,{size:20,children:"heroicons-outline:trash"})})]})}})},Z=(0,n(9038).UY)({utilSteps:u.ZP}),v=n(1413),y=(n(93433),n(75908)),j=n(31095),w=n(66149),P=n(4117),C=n(96467),k=n(71263),N=n(30467),W=n(9289),D=n(32729),R=n(10546),A=n.n(R),T={name:"",entity:"",step_asset_type:[],short_name:""};var I=function(e){var t=(0,o.I0)(),n=(0,o.v9)((function(e){return e.utilStepApp.utilSteps.stepDialog})),a=(0,s.cI)(T),r=a.form,l=a.handleChange,c=a.setForm,d=a.setInForm,p=(0,i.useCallback)((function(){"edit"===n.type&&n.data&&c((0,v.Z)({},n.data)),"new"===n.type&&c((0,v.Z)((0,v.Z)({},T),n.data))}),[n.data,n.type,c]);function h(){"edit"===n.type?t((0,u.xI)()):t((0,u.h9)())}function m(e){if(e.preventDefault(),"new"===n.type)t((0,u.dm)(r));else{var a=A()(n.data,r);a.id=r.id,t((0,u.Td)(a))}h()}return(0,i.useEffect)((function(){n.props.open&&p()}),[n.props.open,p]),(0,S.jsxs)(w.Z,(0,v.Z)((0,v.Z)({classes:{paper:"m-24 rounded-8"}},n.props),{},{onClose:h,fullWidth:!0,maxWidth:"xs",children:[(0,S.jsx)(y.Z,{position:"static",className:"shadow-md",children:(0,S.jsx)(W.Z,{className:"flex w-full",children:(0,S.jsx)(f.Z,{variant:"subtitle1",color:"inherit",children:"new"===n.type?"New UtilStep":"Edit UtilStep"})})}),(0,S.jsxs)("form",{noValidate:!0,onSubmit:m,className:"flex flex-col md:overflow-hidden",children:[(0,S.jsx)(C.Z,{classes:{root:"p-24"},children:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"flex",children:(0,S.jsx)(N.Z,{className:"mb-24",label:"Name",autoFocus:!0,id:"name",name:"name",value:r.name,onChange:l,variant:"outlined",required:!0,fullWidth:!0})}),(0,S.jsx)("div",{className:"flex",children:(0,S.jsx)(D.Z,{className:"mb-24",value:null===r||void 0===r?void 0:r.entity,onChange:function(e,t){d("entity",t)},disableClearable:!0,id:"entityType",options:["Asset","Shot","Sequence"],renderInput:function(e){return(0,S.jsx)(N.Z,(0,v.Z)((0,v.Z)({},e),{},{label:"Entity",required:!0,variant:"outlined"}))},required:!0,fullWidth:!0})}),(0,S.jsx)("div",{className:"flex",children:(0,S.jsx)(N.Z,{className:"mb-24",label:"Short Name",id:"short_name",name:"short_name",value:r.short_name,onChange:l,variant:"outlined",fullWidth:!0})})]})}),(0,S.jsxs)(P.Z,{className:"justify-between pl-16",children:[(0,S.jsx)(j.Z,{variant:"contained",color:"primary",onClick:m,type:"submit",disabled:!(r.name.length>1),children:"new"===n.type?"Add":"Save"}),(0,S.jsx)(x.Z,{onClick:h,children:(0,S.jsx)(k.Z,{children:"close"})})]})]})]}))},U=n(11266),z=(0,c.ZP)(a.Z)((function(e){var t=e.theme;return{"& .PageSimple-header":{backgroundColor:t.palette.background.paper,borderBottomWidth:1,borderStyle:"solid",borderColor:t.palette.divider},"& .PageSimple-toolbar":{},"& .PageSimple-content":{},"& .PageSimple-sidebarHeader":{},"& .PageSimple-sidebarContent":{}}}));var H=(0,r.Z)("utilStepApp",Z)((function(e){var t=(0,o.I0)(),n=(0,i.useRef)(null),a=((0,l.UO)(),(0,d.Z)((function(e){return e.breakpoints.down("lg")})));return(0,s.KW)((function(){t((0,u.jG)())}),[t]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(z,{header:(0,S.jsx)(U.Z,{pageLayout:n,entity:"UtilSteps",openNewDialog:(0,u.Ub)()}),content:(0,S.jsx)(b,{}),ref:n,scroll:a?"normal":"content"}),(0,S.jsx)(I,{})]})}))},94058:function(e,t,n){n.d(t,{Ro:function(){return y},Td:function(){return h},Ub:function(){return Z},Zo:function(){return x},dm:function(){return u},h9:function(){return v},jG:function(){return d},mz:function(){return f},xI:function(){return j}});var a,r=n(4942),i=n(74165),o=n(15861),l=n(80827),s=n(56573),c="/api/v1/utility/utilsteps/",d=(0,l.hg)("utilStepApp/utilStep/getUtilSteps",function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var a,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getState,t=t||a().utilStepApp.utilSteps.routeParams,e.next=4,s.Z.get(c,{params:t});case 4:return r=e.sent,e.next=7,r.data;case 7:return o=e.sent,e.abrupt("return",{data:o,routeParams:t});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),p=(0,l.hg)("utilStepApp/utilStep/getStep",function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var a,r,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,a=n.getState,t=t||a().utilStepApp.utilSteps.routeParams,r=t.uid,e.next=5,s.Z.get(c+r+"/");case 5:return o=e.sent,e.next=8,o.data;case 8:return l=e.sent,e.abrupt("return",{data:l,routeParams:t});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),u=(0,l.hg)("utilStepApp/utilStep/addStep",function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var a,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,n.getState,e.next=3,s.Z.post(c,t);case 3:return a=e.sent,e.next=6,a.data;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h=(0,l.hg)("utilStepApp/utilStep/updateStep",function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var a,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,n.getState,a=t.id,delete t.id,e.next=5,s.Z.patch(c+a+"/",t);case 5:return r=e.sent,e.next=8,r.data;case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),f=(0,l.hg)("utilStepApp/utilStep/removeStep",function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,n.getState,e.next=3,s.Z.delete(c+t+"/");case 3:return a=e.sent,e.next=6,a.data;case 6:return e.sent,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),m=(0,l.HF)({}),g=m.getSelectors((function(e){return e.utilStepApp.utilSteps})),x=g.selectAll,S=(g.selectById,(0,l.oM)({name:"utilStepApp/utilStep",initialState:m.getInitialState({searchText:"",routeParams:{},stepDialog:{type:"new",props:{open:!1},data:null}}),reducers:{setStepsSearchText:{reducer:function(e,t){e.searchText=t.payload},prepare:function(e){return{payload:e.target.value||""}}},resetStepsSearchText:function(e,t){e.searchText=""},openNewUtilStepDialog:function(e,t){e.stepDialog={type:"new",props:{open:!0},data:null}},closeNewUtilStepDialog:function(e,t){e.stepDialog={type:"new",props:{open:!1},data:null}},openEditUtilStepDialog:function(e,t){e.stepDialog={type:"edit",props:{open:!0},data:t.payload}},closeEditUtilStepDialog:function(e,t){e.stepDialog={type:"edit",props:{open:!1},data:null}}},extraReducers:(a={},(0,r.Z)(a,f.fulfilled,(function(e,t){m.removeOne(e,t.payload)})),(0,r.Z)(a,h.fulfilled,(function(e,t){t.payload.length>0?m.upsertMany(e,t.payload):m.upsertOne(e,t.payload)})),(0,r.Z)(a,u.fulfilled,(function(e,t){t.payload.length>0?m.upsertMany(e,t.payload):m.upsertOne(e,t.payload)})),(0,r.Z)(a,p.fulfilled,(function(e,t){var n=t.payload,a=n.data,r=n.routeParams;m.upsertOne(e,a),e.routeParams=r,e.searchText=""})),(0,r.Z)(a,d.fulfilled,(function(e,t){var n=t.payload,a=n.data,r=n.routeParams;m.setAll(e,a),e.routeParams=r,e.searchText=""})),a)})),b=S.actions,Z=(b.setStepsSearchText,b.resetStepsSearchText,b.openNewUtilStepDialog),v=b.closeNewUtilStepDialog,y=b.openEditUtilStepDialog,j=b.closeEditUtilStepDialog;t.ZP=S.reducer},11266:function(e,t,n){var a=n(61113),r=n(70501),i=n(56605),o=n(31095),l=(n(47313),n(2135)),s=n(65503),c=n(64013),d=n(3394),p=n(22408),u=n(46417);t.Z=function(e){var t=(0,p.I0)(),n=s.Z.location.pathname,h=e.openNewDialog,f=e.entity,m=e.searchText,g=e.setSearchText;return(0,u.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-16 sm:space-y-0 flex-1 w-full items-center justify-between py-8 px-16 md:px-16",children:[(0,u.jsx)(a.Z,{component:l.rU,to:n,role:"button",initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-24 font-bold tracking-tight",children:f}),(0,u.jsxs)("div",{className:"flex flex-col w-full sm:w-auto sm:flex-row space-y-16 sm:space-y-0 flex-1 items-center justify-end space-x-8",children:[g&&(0,u.jsxs)(r.Z,{className:"flex items-center w-full sm:max-w-256 space-x-8 px-16 rounded-full border-1 shadow-0",children:[(0,u.jsx)(i.Z,{placeholder:"Search project",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:m,inputProps:{"aria-label":"Search"},onChange:function(e){return t(g(e))}}),(0,u.jsx)(c.Z,{color:"disabled",children:"heroicons-solid:search"})]}),h?(0,u.jsxs)(o.Z,{variant:"contained",color:"secondary",onClick:function(e){e.stopPropagation(),t(h)},children:[(0,u.jsx)(c.Z,{size:20,children:"heroicons-outline:plus"}),(0,u.jsx)("span",{className:"mx-8",children:"Create"})]}):(0,u.jsxs)(o.Z,{variant:"contained",color:"secondary",component:d.Z,to:"new/edit",children:[(0,u.jsx)(c.Z,{size:20,children:"heroicons-outline:plus"}),(0,u.jsx)("span",{className:"mx-8",children:"Create"})]})]})]})}},94560:function(e,t,n){n.d(t,{Z:function(){return R}});var a=n(30168),r=n(4942),i=n(1413),o=n(45987),l=n(31835),s=n(17592),c=n(83061),d=n(47313),p=n(52437),u=n(46417);var h=function(e){return(0,u.jsx)("div",{className:(0,c.Z)("PageSimple-header",e.className),children:(0,u.jsx)("div",{className:"container",children:e.header&&e.header})})},f=n(29439),m=n(33947),g=n(57451),x=n(60211),S=n(22408),b=n(19860),Z=n(6396),v=n(95227);var y=function(e){var t=(0,b.Z)(),n=(0,S.v9)((0,v.lK)(t.palette.primary.main));return(0,u.jsxs)(l.Z,{enable:e.innerScroll,children:[e.header&&(0,u.jsx)(Z.Z,{theme:n,children:(0,u.jsx)("div",{className:(0,c.Z)("PageSimple-sidebarHeader",e.variant),children:e.header})}),e.content&&(0,u.jsx)("div",{className:"PageSimple-sidebarContent",children:e.content})]})},j=(0,d.forwardRef)((function(e,t){var n=e.open,a=e.position,r=e.variant,o=(e.rootRef,e.sidebarWidth),l=(0,d.useState)(n),s=(0,f.Z)(l,2),p=s[0],h=s[1];(0,d.useImperativeHandle)(t,(function(){return{toggleSidebar:S}}));var S=(0,d.useCallback)((function(e){h(e)}),[]);return(0,d.useEffect)((function(){S(n)}),[S,n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g.Z,{lgUp:"permanent"===r,children:(0,u.jsx)(x.Z,{variant:"temporary",anchor:a,open:p,onOpen:function(e){},onClose:function(){return null===e||void 0===e?void 0:e.onClose()},disableSwipeToOpen:!0,classes:{root:(0,c.Z)("PageSimple-sidebarWrapper",r),paper:(0,c.Z)("PageSimple-sidebar",r,"left"===a?"PageSimple-leftSidebar":"PageSimple-rightSidebar")},sx:{"& .MuiPaper-root":{width:o,maxWidth:"100%"}},ModalProps:{keepMounted:!0},BackdropProps:{classes:{root:"PageSimple-backdrop"}},style:{position:"absolute"},children:(0,u.jsx)(y,(0,i.Z)({},e))})}),"permanent"===r&&(0,u.jsx)(g.Z,{lgDown:!0,children:(0,u.jsx)(m.ZP,{variant:"permanent",anchor:a,className:(0,c.Z)("PageSimple-sidebarWrapper",r,p?"opened":"closed","left"===a?"PageSimple-leftSidebar":"PageSimple-rightSidebar"),open:p,onClose:null===e||void 0===e?void 0:e.onClose,classes:{paper:(0,c.Z)("PageSimple-sidebar border-0",r)},children:(0,u.jsx)(y,(0,i.Z)({},e))})})]})}));j.defaultProps={open:!0};var w,P=j,C=["theme"],k=(0,s.ZP)("div")((function(e){var t=e.theme,n=(0,o.Z)(e,C);return{display:"flex",flexDirection:"column",minWidth:0,minHeight:"100%",position:"relative",flex:"1 1 auto",width:"100%",height:"auto",backgroundColor:t.palette.background.default,"&.PageSimple-scroll-content":{height:"100%"},"& .PageSimple-wrapper":(0,i.Z)({display:"flex",flexDirection:"row",flex:"1 1 auto",zIndex:2,minWidth:0,height:"100%",backgroundColor:t.palette.background.default},"content"===n.scroll&&{position:"absolute",top:0,bottom:0,right:0,left:0,overflow:"hidden"}),"& .PageSimple-header":{display:"flex",flex:"0 0 auto",backgroundSize:"cover"},"& .PageSimple-topBg":{position:"absolute",left:0,right:0,top:0,height:N,pointerEvents:"none"},"& .PageSimple-contentWrapper":{display:"flex",flexDirection:"column",width:"100%",flex:"1 1 auto",overflow:"hidden",zIndex:9999},"& .PageSimple-toolbar":{height:W,minHeight:W,display:"flex",alignItems:"center"},"& .PageSimple-content":{display:"flex",flex:"1 1 auto",alignItems:"start",minHeight:0,overflowY:"auto"},"& .PageSimple-sidebarWrapper":{overflow:"hidden",backgroundColor:"transparent",position:"absolute","&.permanent":(0,r.Z)({},t.breakpoints.up("lg"),{position:"relative",marginLeft:0,marginRight:0,transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),"&.closed":{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),"&.PageSimple-leftSidebar":{marginLeft:-n.leftsidebarwidth},"&.PageSimple-rightSidebar":{marginRight:-n.rightsidebarwidth}}})},"& .PageSimple-sidebar":{position:"absolute",backgroundColor:t.palette.background.paper,color:t.palette.text.primary,"&.permanent":(0,r.Z)({},t.breakpoints.up("lg"),{position:"relative"}),maxWidth:"100%",height:"100%"},"& .PageSimple-leftSidebar":(0,r.Z)({width:n.leftsidebarwidth},t.breakpoints.up("lg"),{borderRight:"1px solid ".concat(t.palette.divider),borderLeft:0}),"& .PageSimple-rightSidebar":(0,r.Z)({width:n.rightsidebarwidth},t.breakpoints.up("lg"),{borderLeft:"1px solid ".concat(t.palette.divider),borderRight:0}),"& .PageSimple-sidebarHeader":{height:N,minHeight:N,backgroundColor:t.palette.primary.dark,color:t.palette.primary.contrastText},"& .PageSimple-sidebarHeaderInnerSidebar":{backgroundColor:"transparent",color:"inherit",height:"auto",minHeight:"auto"},"& .PageSimple-sidebarContent":{display:"flex",flexDirection:"column",minHeight:"100%"},"& .PageSimple-backdrop":{position:"absolute"}}})),N=120,W=64,D=(0,d.forwardRef)((function(e,t){var n=(0,d.useRef)(null),a=(0,d.useRef)(null),r=(0,d.useRef)(null);return(0,d.useImperativeHandle)(t,(function(){return{rootRef:r,toggleLeftSidebar:function(e){n.current.toggleSidebar(e)},toggleRightSidebar:function(e){a.current.toggleSidebar(e)}}})),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p.Z,{styles:function(t){return(0,i.Z)((0,i.Z)({},"page"!==e.scroll&&{"#core-toolbar":{position:"static"},"#core-footer":{position:"static"}}),"page"===e.scroll&&{"#core-toolbar":{position:"sticky",top:0},"#core-footer":{position:"sticky",bottom:0}})}}),(0,u.jsx)(k,{className:(0,c.Z)("PageSimple-root","PageSimple-scroll-".concat(e.scroll),e.className),ref:r,scroll:e.scroll,leftsidebarwidth:e.leftSidebarWidth,rightsidebarwidth:e.rightSidebarWidth,children:(0,u.jsx)("div",{className:"flex flex-auto flex-col z-10 h-full",children:(0,u.jsxs)("div",{className:"PageSimple-wrapper",children:[e.leftSidebarContent&&(0,u.jsx)(P,{position:"left",content:e.leftSidebarContent,variant:e.leftSidebarVariant||"permanent",ref:n,rootRef:r,open:e.leftSidebarOpen,onClose:e.leftSidebarOnClose,sidebarWidth:e.leftSidebarWidth}),(0,u.jsxs)("div",{className:"PageSimple-contentWrapper",children:[e.header&&(0,u.jsx)(h,{header:e.header}),e.content&&(0,u.jsx)(l.Z,{enable:"content"===e.scroll,className:(0,c.Z)("PageSimple-content container"),children:e.content})]}),e.rightSidebarContent&&(0,u.jsx)(P,{position:"right",content:e.rightSidebarContent,variant:e.rightSidebarVariant||"permanent",ref:a,rootRef:r,open:e.rightSidebarOpen,onClose:e.rightSidebarOnClose,sidebarWidth:e.rightSidebarWidth})]})})})]})}));D.defaultProps={classes:{},scroll:"page",leftSidebarOpen:!1,rightSidebarOpen:!1,rightSidebarWidth:240,leftSidebarWidth:240};var R=(0,d.memo)((0,s.ZP)(D)(w||(w=(0,a.Z)([""]))))},68941:function(e,t,n){var a=n(1413),r=n(64013),i=n(72034),o=n(3394),l=n(88064),s=n(9506),c=n(47131),d=n(46417);t.Z=function(e){var t=e.isLoading;return(0,d.jsx)(i.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},className:"flex flex-col flex-auto w-full max-h-full",children:(0,d.jsx)(l.ZP,(0,a.Z)({enableFullScreenToggle:!1,enableColumnResizing:!0,enableColumnOrdering:!0,enablePinning:!0,enableColumnDragging:!1,enableRowSelection:!0,enableRowActions:!0,enableStickyHeader:!0,muiTableContainerProps:{sx:{maxHeight:document.documentElement.offsetHeight-250}},state:{isLoading:t,showSkeletons:t},displayColumnDefOptions:{"mrt-row-actions":{header:"Actions",size:70}},renderRowActions:function(e){var t=e.row;e.table;return(0,d.jsx)(s.Z,{sx:{display:"flex",flexWrap:"nowrap",gap:"8px"},children:(0,d.jsx)(c.Z,{variant:"contained",color:"secondary",component:o.Z,to:t.original.id+"/edit",children:(0,d.jsx)(r.Z,{size:20,children:"heroicons-outline:pencil-alt"})})})},positionToolbarAlertBanner:"bottom"},e))})}}}]);