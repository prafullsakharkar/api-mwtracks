"use strict";(self.webpackChunkmwtracks=self.webpackChunkmwtracks||[]).push([[804],{34804:function(e,r,t){t.r(r);var n=t(1413),s=t(61113),a=t(70024),i=t(31095),o=t(3394),u=t(22408),l=t(58467),c=t(47313),d=t(33776),p=t(49614),f=t(21933),m=t(75627),v=t(62563),h=t(15743),Z=t(64013),x=t(63585),g=t(30467),j=t(41727),b=t(32729),w=t(39300),_=t(10546),y=t.n(_),k=t(46417),N=f.Ry().shape({first_name:f.Z_().required("You must enter a name"),email:f.Z_().email("You must enter a valid email").required("You must enter a email")}),A={username:"AutoGeneratedUID",first_name:"",last_name:"",email:"",is_staff:!0,role:"artist",is_active:!0,password:"Welcome@2023",re_password:"Welcome@2023",avatar:null};r.default=function(e){var r,t=(0,l.UO)(),f=(0,u.I0)(),_=(0,l.s0)(),S=(0,u.v9)((function(e){return(0,w.Ls)(e,t.id)}))||null,C=(0,m.cI)({mode:"onChange",resolver:(0,v.X)(N)}),U=C.control,I=C.watch,E=C.reset,P=C.handleSubmit,F=C.formState,L=(C.getValues,C.setValue),W=F.isValid,q=F.dirtyFields,Y=F.errors,Q=I(),R=["admin","owner","production","supervisor","artist"];return(0,c.useEffect)((function(){E("new"==t.id?A:(0,n.Z)({},S))}),[S,E]),p.Z.isEmpty(Q)?(0,k.jsx)(d.Z,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(h.Z,{className:"relative w-full h-88 px-32 sm:px-48",sx:{backgroundColor:"background.default"},children:!Q.avatar&&(0,k.jsx)(s.Z,{className:"flex justify-center mt-24 text-3xl font-bold truncate",children:"Create New User"})}),(0,k.jsxs)("div",{className:"relative flex flex-col flex-auto items-center px-24 sm:px-48",children:[(null===Q||void 0===Q?void 0:Q.avatar)&&(0,k.jsx)("div",{className:"w-full",children:(0,k.jsxs)("div",{className:"flex flex-auto items-end -mt-64",children:[(0,k.jsx)(x.Z,{sx:{borderWidth:4,borderStyle:"solid",borderColor:"background.paper",backgroundColor:"background.default",color:"text.secondary"},className:"w-128 h-128 text-64 font-bold",src:null===Q||void 0===Q?void 0:Q.avatar,alt:null===Q||void 0===Q?void 0:Q.first_name,children:null===Q||void 0===Q||null===(r=Q.first_name)||void 0===r?void 0:r.charAt(0)}),(0,k.jsx)("div",{className:"flex items-center ml-auto mb-4",children:(0,k.jsx)(s.Z,{className:"mt-12 text-2xl font-bold truncate",children:null===Q||void 0===Q?void 0:Q.username})})]})}),(0,k.jsx)(m.Qr,{control:U,name:"first_name",render:function(e){var r,t=e.field;return(0,k.jsx)(g.Z,(0,n.Z)((0,n.Z)({className:"mt-24"},t),{},{label:"First Name",placeholder:"First Name",id:"first_name",error:!!Y.first_name,helperText:null===Y||void 0===Y||null===(r=Y.first_name)||void 0===r?void 0:r.message,variant:"outlined",required:!0,fullWidth:!0,InputProps:{startAdornment:(0,k.jsx)(j.Z,{position:"start",children:(0,k.jsx)(Z.Z,{size:20,children:"heroicons-solid:user-circle"})})}}))}}),(0,k.jsx)(m.Qr,{control:U,name:"last_name",render:function(e){var r,t=e.field;return(0,k.jsx)(g.Z,(0,n.Z)((0,n.Z)({className:"mt-24"},t),{},{label:"Last Name",placeholder:"Last Name",id:"last_name",error:!!Y.last_name,helperText:null===Y||void 0===Y||null===(r=Y.last_name)||void 0===r?void 0:r.message,variant:"outlined",fullWidth:!0,InputProps:{startAdornment:(0,k.jsx)(j.Z,{position:"start",children:(0,k.jsx)(Z.Z,{size:20,children:"heroicons-solid:user-circle"})})}}))}}),(0,k.jsx)(m.Qr,{control:U,name:"email",render:function(e){var r,t=e.field;return(0,k.jsx)(g.Z,(0,n.Z)((0,n.Z)({className:"mt-24"},t),{},{label:"Email",placeholder:"Email",id:"email",error:!!Y.email,helperText:null===Y||void 0===Y||null===(r=Y.email)||void 0===r?void 0:r.message,variant:"outlined",required:!0,fullWidth:!0,InputProps:{startAdornment:(0,k.jsx)(j.Z,{position:"start",children:(0,k.jsx)(Z.Z,{size:20,children:"heroicons-solid:mail"})})}}))}}),(0,k.jsx)(m.Qr,{control:U,name:"role",render:function(e){var r=e.field;r.onChange,r.value;return(0,k.jsx)(b.Z,{id:"role",className:"mt-24",options:R,value:Q.role,disableClearable:!0,fullWidth:!0,onChange:function(e,r){L("role",r)},renderInput:function(e){return(0,k.jsx)(g.Z,(0,n.Z)((0,n.Z)({},e),{},{label:"Roles",placeholder:"Roles"}))}})}}),(0,k.jsx)("div",{className:"mt-24",children:(0,k.jsxs)(s.Z,{children:["Is Active",(0,k.jsx)(m.Qr,{control:U,name:"is_active",label:"User Active",labelPlacement:"start",render:function(e){var r=e.field;return(0,k.jsx)(a.Z,(0,n.Z)((0,n.Z)({checked:Q.is_active},r),{},{name:"is_active"}))}})]})})]}),(0,k.jsxs)(h.Z,{className:"flex items-center mt-40 py-14 pr-16 pl-4 sm:pr-48 sm:pl-36 border-t",sx:{backgroundColor:"background.default"},children:[(0,k.jsx)(i.Z,{className:"ml-auto",component:o.Z,to:-1,children:"Cancel"}),(0,k.jsx)(i.Z,{className:"ml-8",variant:"contained",color:"secondary",disabled:p.Z.isEmpty(q)||!W,onClick:P((function(e){if("new"===t.id)f((0,w.cn)(e)).then((function(){return _("/accounts/users")}));else{var r=y()(S,e);r.id=S.id,f((0,w.Nq)(r)).then((function(){return _("/accounts/users")}))}})),children:"Save"})]})]})}},39300:function(e,r,t){t.d(r,{IY:function(){return m},Ls:function(){return w},Nq:function(){return p},Rf:function(){return c},YN:function(){return b},bz:function(){return x},cn:function(){return d},lP:function(){return h},oY:function(){return f},tI:function(){return v}});var n,s=t(4942),a=t(74165),i=t(15861),o=t(80827),u=t(56573),l="/api/v1/account/users/",c=(0,o.hg)("userApp/users/getUsers",function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t){var n,s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.getState,n=null===r||void 0===r?void 0:r.id,s=null===r||void 0===r?void 0:r.entity,i="group"===s&&n?"/api/v1/user/group/"+n+"/users/":"project"===s&&n?"/api/v1/entity/project/"+n+"/users/":l,null===r||void 0===r||delete r.id,null===r||void 0===r||delete r.entity,e.next=8,u.Z.get(i,{params:r}).then((function(e){return e.data})).catch((function(e){console.error(e)}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),d=(0,o.hg)("userApp/users/addUser",function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t){var n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,delete r.avatar,console.log(r),e.next=5,u.Z.post(l,r);case 5:return n=e.sent,e.next=8,n.data;case 8:return s=e.sent,e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),p=(0,o.hg)("userApp/users/updateUser",function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t){var n,s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,n=r.id,delete r.id,e.next=5,u.Z.patch(l+n+"/",r);case 5:return s=e.sent,e.next=8,s.data;case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),f=(0,o.hg)("userApp/users/addUserToProject",function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatch,t.getState,r.projects.forEach((function(e,t){u.Z.post("/api/v1/entity/project/"+e+"/add_users/",r.users).data}));case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),m=(0,o.hg)("userApp/users/removeUserFromProjects",function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatch,t.getState,r.projects.forEach((function(e,t){u.Z.post("/api/v1/entity/project/"+e+"/remove_users/",r.users).data}));case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),v=(0,o.hg)("userApp/users/addUserToGroups",function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatch,t.getState,r.users.forEach((function(e,t){u.Z.post(l+e+"/add_groups/",r.groups).data}));case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),h=(0,o.hg)("userApp/users/removeUserFromGroups",function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatch,t.getState,r.users.forEach((function(e,t){u.Z.post(l+e+"/remove_groups/",r.groups).data}));case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),Z=(0,o.hg)("userApp/users/removeUser",function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t){var n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,e.next=3,u.Z.delete(l+r+"/");case 3:return n=e.sent,e.next=6,n.data;case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),x=(0,o.hg)("userApp/users/removeUsers",function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.dispatch,t.getState,r.forEach((function(e,r){n(p({id:e,is_active:!1}))}));case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),g=(0,o.HF)({}),j=g.getSelectors((function(e){return e.userApp.users})),b=j.selectAll,w=j.selectById,_=(0,o.oM)({name:"userApp/users",initialState:g.getInitialState({totalCount:0,isLoading:!0}),extraReducers:(n={},(0,s.Z)(n,Z.fulfilled,g.removeOne),(0,s.Z)(n,p.fulfilled,g.upsertOne),(0,s.Z)(n,d.fulfilled,g.addOne),(0,s.Z)(n,c.pending,(function(e,r){e.isLoading=!0})),(0,s.Z)(n,c.fulfilled,(function(e,r){var t=r.payload;g.setAll(e,(null===t||void 0===t?void 0:t.results)||t),e.totalCount=(null===t||void 0===t?void 0:t.count)||t.length,e.isLoading=!1})),n)});r.ZP=_.reducer}}]);