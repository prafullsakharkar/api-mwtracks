"use strict";(self.webpackChunkmwtracks=self.webpackChunkmwtracks||[]).push([[362],{69331:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var r=n(16554),a=n(5531),o=n(22408),i=n(30242),s=n(9038),p=n(99720),l=(0,s.UY)({episodes:p.ZP}),u=n(4942),d=n(1413),c=n(29439),f=n(83508),v=n(75908),g=n(32729),h=n(31095),m=n(66149),Z=n(4117),x=n(96467),y=n(71263),w=n(47131),C=n(30467),j=n(58467),b=n(9289),D=n(61113),E=n(24537),S=n(16429),N=n(83929),k=n(44758),A=n(47313),M=n(49614),I=n(10546),U=n.n(I),F=n.p+"static/media/sample_create_episode.e9784b8654027a540bf2.csv",W=n.p+"static/media/sample_update_episode.8dbee5088bd336158d3b.csv",_=n(46417),L={name:"",description:""};var O=function(e){var t=(0,o.I0)(),n=(0,j.UO)(),r=e.episodeDialog,a=e.episodeIds,i=(0,f.cI)(L),s=i.form,l=i.handleChange,I=i.setForm,O=i.setInForm,P=n.uid.split(":")[0].toLowerCase(),V=["1x","5x","10x","100x"],R=(0,A.useState)(1),z=(0,c.Z)(R,2),K=z[0],G=z[1],B=(0,A.useState)([1,10]),T=(0,c.Z)(B,2),H=T[0],X=T[1],q=(0,A.useState)(V[0]),J=(0,c.Z)(q,2),Y=J[0],$=J[1],Q=(0,A.useState)(1e3*K),ee=(0,c.Z)(Q,2),te=ee[0],ne=ee[1],re=(0,A.useState)("3"),ae=(0,c.Z)(re,2),oe=ae[0],ie=ae[1],se=(0,A.useState)(""),pe=(0,c.Z)(se,2),le=pe[0],ue=pe[1],de=(0,A.useState)(""),ce=(0,c.Z)(de,2),fe=ce[0],ve=ce[1],ge=(0,A.useState)({}),he=(0,c.Z)(ge,2),me=he[0],Ze=he[1],xe=(0,A.useState)([]),ye=(0,c.Z)(xe,2),we=ye[0];ye[1];var Ce=function(e,t){$(t);var n=parseInt(t.replace("x",""));X([n,10*n]),G(n),ne(1e3*n)},je=function(e){var t=(!a||!a.includes(P+":"+e.target.name))&&e.target.checked;Ze((0,d.Z)((0,d.Z)({},me),{},(0,u.Z)({},e.target.name,t)))};(0,A.useEffect)((function(){var e={};M.Z.range(H[0],H[1],K).map((function(t){var n=le+("0".repeat(parseInt(oe))+t).slice(-parseInt(oe))+fe;e[n]=!a||!a.includes(P+":"+n)})),Ze(e)}),[H,K,oe,le,fe]);var be=(0,A.useCallback)((function(){"edit"===r.type&&r.data&&I((0,d.Z)({},r.data)),"new"===r.type&&(I((0,d.Z)((0,d.Z)({},L),r.data)),O("project",P))}),[r.data,r.type,I]);function De(){"edit"===r.type?t((0,p.m7)()):"new"===r.type?t((0,p.SK)()):"multiple"===r.type?t((0,p.T6)()):"csvCreate"===r.type?t((0,p.sN)()):t((0,p.V3)()),Ce("","1x"),ie("3"),ue(""),ve("")}function Ee(e){if(e.preventDefault(),"csvCreate"===r.type&&we.length>0)t((0,p.aM)(we));else if("csvUpdate"===r.type&&we.length>0)t((0,p.Wt)({multipleEpisodeList:we,project:P}));else if("multiple"===r.type&&r.data&&r.data.length>0){var n=r.data.map((function(e){var t=U()(L,s);return t.uid=e,t}));t((0,p.Wt)({multipleEpisodeList:n,project:P}))}else if("new"===r.type){var a=Object.entries(me).filter((function(e){var t=(0,c.Z)(e,2);t[0];return!0===t[1]})).map((function(e){var t=(0,c.Z)(e,2),n=t[0];t[1];return(0,d.Z)((0,d.Z)({},s),{name:n})}));t((0,p.aM)(a))}else{var o=U()(r.data,s);o.id=s.uid,t((0,p.Rh)(o))}De()}return(0,A.useEffect)((function(){r.props.open&&be()}),[r.props.open,be]),(0,_.jsxs)(m.Z,(0,d.Z)((0,d.Z)({classes:{paper:"m-24 rounded-8"}},r.props),{},{onClose:De,fullWidth:!0,maxWidth:r.type.startsWith("csv")?"md":"xs",children:[(0,_.jsx)(v.Z,{position:"static",className:"shadow-md",children:(0,_.jsxs)(b.Z,{className:"flex w-full justify-between",children:[(0,_.jsx)(D.Z,{variant:"subtitle1",color:"inherit",children:"new"===r.type?"New Episode":"edit"===r.type?"Edit Episode":"multiple"===r.type?"Multiple Episodes":"csvCreate"===r.type?"Create Episodes from CSV":"Update Episodes from CSV"}),(0,_.jsx)(D.Z,{variant:"subtitle1",color:"inherit",children:P&&P.toUpperCase()})]})}),(0,_.jsxs)("form",{noValidate:!0,onSubmit:Ee,className:"flex flex-col md:overflow-hidden",children:[(0,_.jsxs)(x.Z,{classes:{root:"p-24"},children:["csvCreate"===r.type&&(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("a",{variant:"contained",color:"secondary",href:F,download:"SampleCreateEpisode.csv",children:"Download Sample CSV"})}),"csvUpdate"===r.type&&(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("a",{variant:"contained",color:"secondary",href:W,download:"SampleUpdateEpisode.csv",children:"Download Sample CSV"})}),"edit"===r.type&&(0,_.jsx)("div",{className:"flex mb-16 justify-center",children:(0,_.jsx)(D.Z,{variant:"subtitle1",color:"secondary",children:s.uid})}),["new","edit","multiple"].includes(r.type)&&(0,_.jsx)("div",{className:"flex flex-1 mb-16",children:(0,_.jsx)(C.Z,{label:"Description",autoFocus:!0,onChange:l,id:"description",name:"description",value:s.description,variant:"outlined",fullWidth:!0})}),"new"===r.type&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"flex flex-row mb-16",children:[(0,_.jsx)("div",{className:"mr-5 flex-1",children:(0,_.jsx)(g.Z,{value:Y,onChange:Ce,disableClearable:!0,id:"range-list-demo",options:V,renderInput:function(e){return(0,_.jsx)(C.Z,(0,d.Z)((0,d.Z)({},e),{},{label:"Range X",required:!0,variant:"outlined"}))}})}),(0,_.jsx)("div",{className:"flex-1",children:(0,_.jsx)(g.Z,{value:oe,onChange:function(e,t){ie(t)},disableClearable:!0,id:"decimal",options:["3","4"],renderInput:function(e){return(0,_.jsx)(C.Z,(0,d.Z)((0,d.Z)({},e),{},{label:"Decimal",required:!0,variant:"outlined"}))}})})]}),(0,_.jsxs)("div",{className:"flex mb-16",children:[(0,_.jsx)("div",{className:"mr-5 flex-1",children:(0,_.jsx)(C.Z,{label:"Starts With",value:le,onChange:function(e){ue(e.target.value)},variant:"outlined",fullWidth:!0})}),(0,_.jsx)("div",{className:"flex-1",children:(0,_.jsx)(C.Z,{label:"Ends With",value:fe,onChange:function(e){ve(e.target.value)},variant:"outlined",fullWidth:!0})})]}),(0,_.jsxs)("div",{className:"flex flex-wrap mb-16",children:[(0,_.jsx)(D.Z,{id:"range-slider",gutterBottom:!0,children:"Episode range"}),(0,_.jsx)(E.ZP,{value:H,min:K,max:te,step:K,marks:!0,onChange:function(e,t){X(t)},valueLabelDisplay:"auto","aria-labelledby":"range-slider"})]}),(0,_.jsxs)("div",{className:"flex flex-col",children:[(0,_.jsx)("div",{className:"",children:(0,_.jsx)(D.Z,{id:"range-slider",gutterBottom:!0,children:"Checked Episodes will be created :"})}),(0,_.jsx)("div",{className:"",children:(0,_.jsx)(S.Z,{row:!0,children:me&&Object.keys(me).map((function(e){return(0,_.jsx)(N.Z,{control:(0,_.jsx)(k.Z,{onChange:je,checked:me[e]}),name:e,label:e},e)}))})})]})]})]}),(0,_.jsxs)(Z.Z,{className:"justify-between pl-16",children:[(0,_.jsx)(h.Z,{variant:"contained",color:"primary",onClick:Ee,type:"submit",disabled:!function(){var e=Object.values(me).filter((function(e){return!0===e}));return r.type.startsWith("csv")?we.length>0:e.length>0}(),children:["edit","multiple","csvUpdate"].includes(r.type)?"Update":"Create"}),(0,_.jsx)(w.Z,{onClick:De,children:(0,_.jsx)(y.Z,{children:"close"})})]})]})]}))},P=n(65503),V=n(89600),R=n(88584);var z=function(e){var t=(0,o.I0)(),n=(0,j.UO)(),r=(0,o.v9)(p.gS),a=(0,o.v9)((function(e){return e.episodeApp.episodes.isLoading})),i=(0,o.v9)((function(e){return e.episodeApp.episodes.totalCount})),s=(0,A.useState)(!1),l=(0,c.Z)(s,2),u=l[0],d=l[1],f=(0,A.useState)(""),v=(0,c.Z)(f,2),g=v[0],h=v[1],m=(0,A.useState)([]),Z=(0,c.Z)(m,2),x=Z[0],y=Z[1],w=(0,A.useState)({pageIndex:0,pageSize:25}),C=(0,c.Z)(w,2),b=C[0],E=C[1];(0,A.useEffect)((function(){!function(){r.length&&d(!0);var e={page_size:b.pageSize,start:b.pageIndex*b.pageSize};e[n.entity]=n.uid,g&&(e.search=g);var a=x.length>0&&x.map((function(e){return e.desc?"-"+e.id:e.id}))||[];a.length>0&&(e.ordering=a.join(",")),t((0,p.Jy)(e)),d(!1)}()}),[g,b.pageIndex,b.pageSize,x,n]),(0,A.useEffect)((function(){E({pageIndex:0,pageSize:25})}),[g]);var S=A.useMemo((function(){return[{header:"Id",accessorKey:"uid",Cell:function(e){var t=e.row;return(0,_.jsx)(D.Z,{className:"cursor-pointer",onClick:function(e){e.preventDefault(),P.Z.push("/entity/episode/"+t.original.uid+"/overview")},children:t.original.uid})}},{header:"Name",accessorKey:"name"},{header:"Description",accessorKey:"description"},{header:"Created At",accessorKey:"created_at",Cell:function(e){var t=e.row;return(0,_.jsx)("span",{children:t.original.created_at&&(0,V.Z)(new Date(t.original.created_at),"dd-MM-y hh:mm:ss")})}}]}),[]);return(0,_.jsx)(R.Z,{columns:S,data:r,onGlobalFilterChange:h,onPaginationChange:E,onSortingChange:y,rowCount:i,state:{globalFilter:g,isLoading:a,pagination:b,showProgressBars:u,sorting:x},openEditDialog:p.X$,openNewDialog:p.H,removeEntities:p.Tu,openMultipleDialog:p.lD,openCsvCreateDialog:p.rW,openCsvUpdateDialog:p.vf})},K=n(22116);var G=(0,a.Z)("episodeApp",l)((function(){var e=(0,i.Z)((function(e){return e.breakpoints.down("lg")})),t=(0,o.v9)((function(e){return e.episodeApp.episodes.episodeDialog})),n=(0,o.v9)((function(e){return e.episodeApp.episodes.ids})),a=(0,o.v9)((function(e){return e.episodeApp.episodes.totalCount}));return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.Z,{header:(0,_.jsx)(K.Z,{entity:"Episodes",totalCount:a}),content:(0,_.jsx)(z,{}),scroll:e?"normal":"content"}),(0,_.jsx)(O,{episodeDialog:t,episodeIds:n})]})}))},99720:function(e,t,n){n.d(t,{H:function(){return S},IU:function(){return v},Jy:function(){return f},Rh:function(){return m},SK:function(){return N},T6:function(){return I},Tu:function(){return y},V3:function(){return _},Wt:function(){return Z},X$:function(){return k},aM:function(){return h},gS:function(){return j},i3:function(){return b},lD:function(){return M},m7:function(){return A},rW:function(){return U},sN:function(){return F},vf:function(){return W}});var r,a=n(4942),o=n(74165),i=n(1413),s=n(15861),p=n(80827),l=n(56573),u=n(32600),d=(n(76419),n(18390)),c="/api/v1/entity/episodes/",f=(0,p.hg)("episodeApp/episode/getEpisodes",function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,a,s,p;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.getState,r=null===t||void 0===t?void 0:t.uid,a=null===t||void 0===t?void 0:t.entity,s=a&&r?"/api/v1/entity/"+a+"s/"+r+"/episodes/":c,null===(p=(0,i.Z)({},t))||void 0===p||delete p.uid,null===p||void 0===p||delete p.entity,e.next=9,l.Z.get(s,{params:p}).then((function(e){return e.data})).catch((function(e){return console.error(e),[]}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v=(0,p.hg)("episodeApp/episode/getEpisode",function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,n.getState,r=t.uid,e.next=4,l.Z.get(c+r+"/");case 4:return a=e.sent,e.next=7,a.data;case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g=(0,p.hg)("episodeApp/episode/addEpisode",function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,n.getState,e.next=3,l.Z.post(c,t);case 3:return r=e.sent,e.next=6,r.data;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h=(0,p.hg)("episodeApp/episode/addEpisodes",function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,n.getState,e.next=3,l.Z.post(c,t);case 3:return r=e.sent,e.next=6,r.data;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),m=(0,p.hg)("episodeApp/episode/updateEpisode",function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,n.getState,r=t.id,delete t.id,e.next=5,l.Z.patch(c+r+"/",t);case 5:return a=e.sent,e.next=8,a.data;case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Z=(0,p.hg)("episodeApp/episode/updateMultipleEpisodes",function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,a,i,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.multipleEpisodeList,a=t.project,n.dispatch,n.getState,e.next=4,l.Z.post("/api/v1/entity/projects/"+a+"/episode_bulk_update/",r);case 4:return i=e.sent,e.next=7,i.data;case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x=(0,p.hg)("episodeApp/episode/removeEpisode",function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,n.getState,e.next=3,l.Z.delete(c+t+"/").then((function(e){return console.info(e),t})).catch((function(e){console.error(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),y=(0,p.hg)("episodeApp/episode/removeEpisodes",function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,n.getState,(0,u._1)({title:"Confirm to delete episodes !!!",message:"Are you sure, you want to remove selected episodes ?",buttons:[{label:"Yes",onClick:function(){t.map((function(e){r(x(e))})),r((0,d.PV)({message:"Episodes has been removed successfully !"}))}},{label:"No",onClick:function(){return console.log("No action to remove episodes")}}]}),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),w=(0,p.HF)({selectId:function(e){return e.uid}}),C=w.getSelectors((function(e){return e.episodeApp?e.episodeApp.episodes:e.overviewApp.episodes})),j=C.selectAll,b=(C.selectEntities,C.selectById),D=(0,p.oM)({name:"episodeApp/episodes",initialState:w.getInitialState({totalCount:0,isLoading:!0,routeParams:{},episodeDialog:{type:"new",props:{open:!1},data:null}}),reducers:{openNewEpisodeDialog:function(e,t){e.episodeDialog={type:"new",props:{open:!0},data:null}},closeNewEpisodeDialog:function(e,t){e.episodeDialog={type:"new",props:{open:!1},data:null}},openEditEpisodeDialog:function(e,t){e.episodeDialog={type:"edit",props:{open:!0},data:t.payload}},closeEditEpisodeDialog:function(e,t){e.episodeDialog={type:"edit",props:{open:!1},data:null}},openMultipleEpisodeDialog:function(e,t){e.episodeDialog={type:"multiple",props:{open:!0},data:t.payload}},closeMultipleEpisodeDialog:function(e,t){e.episodeDialog={type:"multiple",props:{open:!1},data:null}},openCsvCreateDialog:function(e,t){e.episodeDialog={type:"csvCreate",props:{open:!0},data:t.payload}},closeCsvCreateDialog:function(e,t){e.episodeDialog={type:"csvCreate",props:{open:!1},data:null}},openCsvUpdateDialog:function(e,t){e.episodeDialog={type:"csvUpdate",props:{open:!0},data:t.payload}},closeCsvUpdateDialog:function(e,t){e.episodeDialog={type:"csvUpdate",props:{open:!1},data:null}}},extraReducers:(r={},(0,a.Z)(r,x.fulfilled,(function(e,t){w.removeOne(e,t.payload)})),(0,a.Z)(r,m.fulfilled,(function(e,t){t.payload.length>0?w.upsertMany(e,t.payload):w.upsertOne(e,t.payload)})),(0,a.Z)(r,g.fulfilled,(function(e,t){t.payload.length>0?w.upsertMany(e,t.payload):w.upsertOne(e,t.payload)})),(0,a.Z)(r,h.fulfilled,(function(e,t){t.payload.length>0?w.upsertMany(e,t.payload):w.upsertOne(e,t.payload)})),(0,a.Z)(r,v.fulfilled,(function(e,t){w.upsertOne(e,t.payload)})),(0,a.Z)(r,f.pending,(function(e,t){e.isLoading=!0})),(0,a.Z)(r,f.fulfilled,(function(e,t){var n=t.payload;w.setAll(e,(null===n||void 0===n?void 0:n.results)||n),e.totalCount=(null===n||void 0===n?void 0:n.count)||n.length,e.isLoading=!1})),(0,a.Z)(r,Z.fulfilled,(function(e,t){w.upsertMany(e,t.payload)})),r)}),E=D.actions,S=E.openNewEpisodeDialog,N=E.closeNewEpisodeDialog,k=E.openEditEpisodeDialog,A=E.closeEditEpisodeDialog,M=E.openMultipleEpisodeDialog,I=E.closeMultipleEpisodeDialog,U=E.openCsvCreateDialog,F=E.closeCsvCreateDialog,W=E.openCsvUpdateDialog,_=E.closeCsvUpdateDialog;t.ZP=D.reducer},16429:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(63366),a=n(87462),o=n(47313),i=n(2197),s=n(21921),p=n(17592),l=n(77342),u=n(77430),d=n(32298);function c(e){return(0,d.Z)("MuiFormGroup",e)}(0,u.Z)("MuiFormGroup",["root","row","error"]);var f=n(99008),v=n(80300),g=n(46417),h=["className","row"],m=(0,p.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.row&&t.row]}})((function(e){var t=e.ownerState;return(0,a.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})})),Z=o.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiFormGroup"}),o=n.className,p=n.row,u=void 0!==p&&p,d=(0,r.Z)(n,h),Z=(0,f.Z)(),x=(0,v.Z)({props:n,muiFormControl:Z,states:["error"]}),y=(0,a.Z)({},n,{row:u,error:x.error}),w=function(e){var t=e.classes,n={root:["root",e.row&&"row",e.error&&"error"]};return(0,s.Z)(n,c,t)}(y);return(0,g.jsx)(m,(0,a.Z)({className:(0,i.Z)(w.root,o),ownerState:y,ref:t},d))}))}}]);