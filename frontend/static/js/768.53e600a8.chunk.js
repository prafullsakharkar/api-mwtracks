"use strict";(self.webpackChunkmwtracks=self.webpackChunkmwtracks||[]).push([[768],{38473:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var r=t(16554),a=t(5531),s=t(22408),i=t(30242),o=t(9038),l=t(31335),c=t(99720),u=(0,o.UY)({sequences:l.ZP,episodes:c.ZP}),d=t(22116),p=t(4942),f=t(1413),v=t(29439),m=t(83508),x=t(75908),h=t(32729),Z=t(31095),g=t(66149),j=t(4117),w=t(96467),C=t(71263),S=t(47131),y=t(30467),b=t(24537),q=t(44758),N=t(16429),D=t(83929),I=t(58467),k=t(9289),F=t(61113),U=t(47313),W=t(49614),_=t(10546),E=t.n(_),M=t.p+"static/media/sample_create_sequence.18924e3f373487b71b51.csv",A=t.p+"static/media/sample_update_sequence.f6882f9d7ce9ae776730.csv",P=t(46417),z={name:"",episode:"",project_code:"",description:""};var L=function(e){var n,t,r=(0,s.I0)(),a=(0,I.UO)(),i=e.sequenceDialog,o=e.episodeIds,u=e.sequenceIds,d=(0,m.cI)(z),_=d.form,L=d.handleChange,V=d.setForm,O=d.setInForm,G=d.resetForm,K=(0,s.v9)((function(e){return e.core.projects.entities})),R=null===a||void 0===a||null===(n=a.uid)||void 0===n?void 0:n.split(":")[0].toLowerCase(),B=K&&(null===(t=K[R])||void 0===t?void 0:t.is_episodic),Q=["1x","5x","10x","100x"],H=(0,U.useState)(R),J=(0,v.Z)(H,2),T=J[0],X=J[1],Y=(0,U.useState)(1),$=(0,v.Z)(Y,2),ee=$[0],ne=$[1],te=(0,U.useState)([1,10]),re=(0,v.Z)(te,2),ae=re[0],se=re[1],ie=(0,U.useState)(Q[0]),oe=(0,v.Z)(ie,2),le=oe[0],ce=oe[1],ue=(0,U.useState)(90*ee),de=(0,v.Z)(ue,2),pe=de[0],fe=de[1],ve=(0,U.useState)("3"),me=(0,v.Z)(ve,2),xe=me[0],he=me[1],Ze=(0,U.useState)(""),ge=(0,v.Z)(Ze,2),je=ge[0],we=ge[1],Ce=(0,U.useState)(""),Se=(0,v.Z)(Ce,2),ye=Se[0],be=Se[1],qe=(0,U.useState)([]),Ne=(0,v.Z)(qe,2),De=Ne[0],Ie=Ne[1],ke=(0,U.useState)([]),Fe=(0,v.Z)(ke,2),Ue=Fe[0];Fe[1];var We=function(e,n){ce(n);var t=parseInt(n.replace("x",""));se([t,10*t]),ne(t),fe(90*t)};(0,U.useEffect)((function(){a&&B&&r((0,c.Jy)(a))}),[a,B]),(0,U.useEffect)((function(){var e={};W.Z.range(ae[0],ae[1],ee).map((function(n){var t=je+("0".repeat(parseInt(xe))+n).slice(-parseInt(xe))+ye;e[t]=!u||!u.includes(T+":"+t)})),T&&Ie(e)}),[ae,ee,xe,je,ye,T]);var _e=(0,U.useCallback)((function(){G(),"edit"===i.type&&i.data&&V((0,f.Z)({},i.data)),"new"===i.type&&(V((0,f.Z)((0,f.Z)({},z),i.data)),O("project",R),X(R))}),[i.data,i.type,V]);(0,U.useEffect)((function(){i.props.open&&_e()}),[i.props.open,_e]);var Ee=function(e){var n=(!u||!u.includes(R+":"+e.target.name))&&e.target.checked;Ie((0,f.Z)((0,f.Z)({},De),{},(0,p.Z)({},e.target.name,n)))};function Me(){"edit"===i.type?r((0,l.rQ)()):"new"===i.type?r((0,l.K$)()):"multiple"===i.type?r((0,l.rd)()):"csvCreate"===i.type?r((0,l.sN)()):r((0,l.V3)()),We("","1x"),he("3"),we(""),be(""),Ie({})}function Ae(e){if(e.preventDefault(),"csvCreate"===i.type&&Ue.length>0)r((0,l.Q8)(Ue));else if("csvUpdate"===i.type&&Ue.length>0)r((0,l.Po)({multipleSequenceList:Ue,project:R}));else if("multiple"===i.type&&i.data&&i.data.length>0){var n=i.data.map((function(e){var n=E()(z,_);return n.uid=e,n}));r((0,l.Po)({multipleSequenceList:n,project:R}))}else if("new"===i.type){var t=Object.entries(De).filter((function(e){var n=(0,v.Z)(e,2);n[0];return!0===n[1]})).map((function(e){var n=(0,v.Z)(e,2),t=n[0];n[1];return(0,f.Z)((0,f.Z)({},_),{name:t})}));r((0,l.Q8)(t))}else{var a=E()(i.data,_);a.id=_.uid,r((0,l.Tf)(a))}Me()}return(0,P.jsxs)(g.Z,(0,f.Z)((0,f.Z)({classes:{paper:"m-24 rounded-8"}},i.props),{},{onClose:Me,fullWidth:!0,maxWidth:i.type.startsWith("csv")?"md":"xs",children:[(0,P.jsx)(x.Z,{position:"static",className:"shadow-md",children:(0,P.jsxs)(k.Z,{className:"flex w-full justify-between",children:[(0,P.jsx)(F.Z,{variant:"subtitle1",color:"inherit",children:"new"===i.type?"New Sequence":"edit"===i.type?"Edit Sequence":"multiple"===i.type?"Multiple Sequences":"csvCreate"===i.type?"Create Sequences from CSV":"Update Sequences from CSV"}),(0,P.jsx)(F.Z,{variant:"subtitle1",color:"inherit",children:R&&R.toUpperCase()})]})}),(0,P.jsxs)("form",{noValidate:!0,onSubmit:Ae,className:"flex flex-col md:overflow-hidden",children:[(0,P.jsxs)(w.Z,{classes:{root:"p-24"},children:["csvCreate"===i.type&&(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("a",{variant:"contained",color:"secondary",href:M,download:"SampleCreateSequence.csv",children:"Download Sample CSV"})}),"csvUpdate"===i.type&&(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("a",{variant:"contained",color:"secondary",href:A,download:"SampleUpdateSequence.csv",children:"Download Sample CSV"})}),"edit"===i.type&&(0,P.jsx)("div",{className:"flex mb-16 justify-center",children:(0,P.jsx)(F.Z,{variant:"subtitle1",color:"secondary",children:_.uid})}),["new","edit","multiple"].includes(i.type)&&(0,P.jsx)("div",{className:"flex",children:(0,P.jsx)(y.Z,{className:"mb-12",label:"Decription",id:"description",name:"description",value:_.description,onChange:L,variant:"outlined",fullWidth:!0})}),"new"===i.type&&(0,P.jsxs)(P.Fragment,{children:[B&&(0,P.jsx)("div",{className:"flex flex-row mb-16",children:(0,P.jsx)("div",{className:"flex-1",children:(0,P.jsx)(h.Z,{value:_.episode,onChange:function(e,n){O("episode",n),X(n)},disableClearable:!0,getOptionLabel:function(e){return e.split(":").slice(-1).join()},id:"episode",options:o,renderInput:function(e){return(0,P.jsx)(y.Z,(0,f.Z)((0,f.Z)({},e),{},{label:"Episode",required:!0,variant:"outlined"}))}})})}),(0,P.jsxs)("div",{className:"flex flex-row mb-16",children:[(0,P.jsx)("div",{className:"mr-5 flex-1",children:(0,P.jsx)(h.Z,{value:le,onChange:We,disableClearable:!0,id:"range-list-demo",options:Q,renderInput:function(e){return(0,P.jsx)(y.Z,(0,f.Z)((0,f.Z)({},e),{},{label:"Range X",required:!0,variant:"outlined"}))}})}),(0,P.jsx)("div",{className:"flex-1",children:(0,P.jsx)(h.Z,{value:xe,onChange:function(e,n){he(n)},disableClearable:!0,id:"decimal",options:["3","4"],renderInput:function(e){return(0,P.jsx)(y.Z,(0,f.Z)((0,f.Z)({},e),{},{label:"Decimal",required:!0,variant:"outlined"}))}})})]}),(0,P.jsxs)("div",{className:"flex mb-16",children:[(0,P.jsx)("div",{className:"mr-5 flex-1",children:(0,P.jsx)(y.Z,{label:"Starts With",value:je,onChange:function(e){we(e.target.value)},variant:"outlined",fullWidth:!0})}),(0,P.jsx)("div",{className:"flex-1",children:(0,P.jsx)(y.Z,{label:"Ends With",value:ye,onChange:function(e){be(e.target.value)},variant:"outlined",fullWidth:!0})})]}),(0,P.jsxs)("div",{className:"flex flex-wrap mb-16",children:[(0,P.jsx)(F.Z,{id:"range-slider",gutterBottom:!0,children:"Sequence range"}),(0,P.jsx)(b.ZP,{value:ae,min:ee,max:pe,step:ee,marks:!0,onChange:function(e,n){se(n)},valueLabelDisplay:"auto","aria-labelledby":"range-slider"})]}),(0,P.jsxs)("div",{className:"flex flex-col",children:[(0,P.jsx)("div",{className:"",children:(0,P.jsx)(F.Z,{id:"range-slider",gutterBottom:!0,children:"Checked Sequences will be created :"})}),(0,P.jsx)("div",{className:"",children:(0,P.jsx)(N.Z,{row:!0,children:De&&Object.keys(De).map((function(e){return(0,P.jsx)(D.Z,{control:(0,P.jsx)(q.Z,{onChange:Ee,checked:De[e]}),name:e,label:e},e)}))})})]})]})]}),(0,P.jsxs)(j.Z,{className:"justify-between pl-16",children:[(0,P.jsx)(Z.Z,{variant:"contained",color:"primary",onClick:Ae,type:"submit",disabled:!function(){var e=Object.values(De).filter((function(e){return!0===e}));return i.type.startsWith("csv")?Ue.length>0:e.length>0}(),children:["edit","multiple","csvUpdate"].includes(i.type)?"Update":"Create"}),(0,P.jsx)(S.Z,{onClick:Me,children:(0,P.jsx)(C.Z,{children:"close"})})]})]})]}))},V=t(65503),O=t(89600),G=t(88584);var K=function(e){var n=(0,s.I0)(),t=(0,I.UO)(),r=(0,s.v9)(l.WV),a=(0,s.v9)((function(e){return e.sequenceApp.sequences.isLoading})),i=(0,s.v9)((function(e){return e.sequenceApp.sequences.totalCount})),o=(0,U.useState)(!1),c=(0,v.Z)(o,2),u=c[0],d=c[1],p=(0,U.useState)(""),f=(0,v.Z)(p,2),m=f[0],x=f[1],h=(0,U.useState)([]),Z=(0,v.Z)(h,2),g=Z[0],j=Z[1],w=(0,U.useState)({pageIndex:0,pageSize:25}),C=(0,v.Z)(w,2),S=C[0],y=C[1];(0,U.useEffect)((function(){!function(){r.length&&d(!0);var e={page_size:S.pageSize,start:S.pageIndex*S.pageSize};e[t.entity]=t.uid,m&&(e.search=m);var a=g.length>0&&g.map((function(e){return e.desc?"-"+e.id:e.id}))||[];a.length>0&&(e.ordering=a.join(",")),n((0,l.nH)(e)),d(!1)}()}),[m,S.pageIndex,S.pageSize,g,t]),(0,U.useEffect)((function(){y({pageIndex:0,pageSize:25})}),[m]);var b=U.useMemo((function(){return[{header:"Id",accessorKey:"uid",Cell:function(e){var n=e.row;return(0,P.jsx)(F.Z,{className:"cursor-pointer",onClick:function(e){e.preventDefault(),V.Z.push("/entity/sequence/"+n.original.uid+"/overview")},children:n.original.uid})}},{header:"Name",accessorKey:"name"},{header:"Description",accessorKey:"description"},{header:"Created At",accessorKey:"created_at",Cell:function(e){var n=e.row;return(0,P.jsx)("span",{children:n.original.created_at&&(0,O.Z)(new Date(n.original.created_at),"dd-MM-y hh:mm:ss")})}}]}),[]);return(0,P.jsx)(G.Z,{columns:b,data:r,onGlobalFilterChange:x,onPaginationChange:y,onSortingChange:j,rowCount:i,state:{globalFilter:m,isLoading:a,pagination:S,showProgressBars:u,sorting:g},openEditDialog:l.p_,openNewDialog:l.wl,removeEntities:l.Um,openMultipleDialog:l.ez,openCsvCreateDialog:l.rW,openCsvUpdateDialog:l.vf})};var R=(0,a.Z)("sequenceApp",u)((function(){var e=(0,i.Z)((function(e){return e.breakpoints.down("lg")})),n=(0,s.v9)((function(e){return e.sequenceApp.sequences.sequenceDialog})),t=(0,s.v9)((function(e){return e.sequenceApp.sequences.ids})),a=(0,s.v9)((function(e){return e.sequenceApp.episodes.ids})),o=(0,s.v9)((function(e){return e.sequenceApp.sequences.totalCount}));return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(r.Z,{header:(0,P.jsx)(d.Z,{entity:"Sequence",totalCount:o}),content:(0,P.jsx)(K,{}),scroll:e?"normal":"content"}),(0,P.jsx)(L,{sequenceDialog:n,episodeIds:a,sequenceIds:t})]})}))},16429:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(63366),a=t(87462),s=t(47313),i=t(2197),o=t(21921),l=t(17592),c=t(77342),u=t(77430),d=t(32298);function p(e){return(0,d.Z)("MuiFormGroup",e)}(0,u.Z)("MuiFormGroup",["root","row","error"]);var f=t(99008),v=t(80300),m=t(46417),x=["className","row"],h=(0,l.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.row&&n.row]}})((function(e){var n=e.ownerState;return(0,a.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})})),Z=s.forwardRef((function(e,n){var t=(0,c.Z)({props:e,name:"MuiFormGroup"}),s=t.className,l=t.row,u=void 0!==l&&l,d=(0,r.Z)(t,x),Z=(0,f.Z)(),g=(0,v.Z)({props:t,muiFormControl:Z,states:["error"]}),j=(0,a.Z)({},t,{row:u,error:g.error}),w=function(e){var n=e.classes,t={root:["root",e.row&&"row",e.error&&"error"]};return(0,o.Z)(t,p,n)}(j);return(0,m.jsx)(h,(0,a.Z)({className:(0,i.Z)(w.root,s),ownerState:j,ref:n},d))}))}}]);